---
title: "地価公示の基礎データベース作成"
author: "syunsuke.fukuda@gmail.com"
date: "2019/9/19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 地価公示の基礎データベース

国土交通省が公開する国土数値情報の中に、
地価公示データがあります。
このデータをRから使いやすいよう項目を整理して
Rデータとして読み込むためのルーチンを公開します。

## データの準備

このルーチンを使って、自らRデータを作成するためには、
国土数値情報の地価公示データが必要です。

http://nlftp.mlit.go.jp/ksj/index.html

上記Webページの旧統一フォーマット形式のテキストで配布されている「地価公示」データをダウンロードします。
ファイルは年及び都道府県単位で分かれており、すべてのファイルを得る場合、約1700ファイルになります。
また、これらのファイルはzip形式でアーカイブされており、地価公示データであるcsvファイルのほか、データ仕様の説明ファイル等が入っています。

本件ルーチンを使ってデータベースを作成するには、データ化したいcsvファイルを特定の一つのフォルダの中に保存してください。

# データベースの作成

## ルーチンの読み込み

```{r}
source("code/read_tool.R", encoding = "UTF-8")
```

## ディレクトリの設定

```{r}
# csvファイルの入っているディレクトリを指定
src_dir <- "csv_files"
```


## データフレームデータの作成

全データの処理には5分程度かかります。

```{r}
# 地価公示データを作成する
kouji_data <- make_kouji_base_DB(target_dir = src_dir)
```

## データのファイル化
ここで作成したRデータをファイルとして保存しておけば、
いつでもロードするだけでR環境にデータを読み込めます。
```{r}
save(kouji_data, file = "kouji_data.rda")
```







